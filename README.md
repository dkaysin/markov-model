Simple markov model that supports multiple layers of connections.
The layers are maintained in parallel and a more fitting layer can be chosen at each step of the model via a user-defined "selector" function.

Included example provides text prediction based on the Leo Tolstoy's "War and Peace" text.
